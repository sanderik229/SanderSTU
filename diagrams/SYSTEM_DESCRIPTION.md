# Описание системы SanderStu

## Обзор системы

**SanderStu** - платформа для заказа рекламы у блоггеров и управления рекламными услугами.

### Основные возможности

1. **Для пользователей:**
   - Просмотр каталога рекламных услуг
   - Заказ рекламы у блоггеров
   - Создание персональных заказов
   - Просмотр истории заказов
   - Оставление отзывов

2. **Для менеджеров:**
   - Управление блоггерами
   - Создание рекламных услуг
   - Прием/отклонение персональных заказов
   - Генерация еженедельных отчётов
   - Экспорт отчётов в PDF

3. **Для администраторов:**
   - Полный контроль над системой
   - Статистика по заказам и пользователям
   - Управление пользователями
   - Просмотр всех услуг

## Структура проекта

```
SanderSTU-1/
├── accounts/          # Управление пользователями
├── ads/              # Заказы и предложения
├── bloggers/         # Блоггеры и рекламные предложения
├── managers/         # Менеджеры и услуги
├── shop/             # Интернет-магазин
├── adminpanel/       # Административная панель
├── payments/         # Транзакции
├── reviews/          # Отзывы
└── sanderstu/        # Настройки проекта
```

## Роли пользователей

### Обычный пользователь
- Регистрация и вход в систему
- Просмотр каталога
- Заказ рекламы
- Просмотр своих заказов

### Менеджер
- Управление блоггерами
- Создание рекламных услуг
- Приём персональных заказов
- Генерация и экспорт отчётов
- Управление уведомлениями

### Администратор
- Полный доступ к системе
- Управление всеми пользователями
- Просмотр статистики
- Управление всеми заказами

## Диаграммы

### 1. Диаграмма классов
**Файл:** `diagrams/CLASS_DIAGRAM.md`
- Описание классов и их отношений
- Основные атрибуты классов
- Связи между классами

### 2. ER-диаграмма (Логическая модель)
**Файл:** `diagrams/ER_DIAGRAM.md`
- Сущности системы
- Отношения между сущностями
- Кардинальность связей

### 3. Структурная схема
**Файл:** `diagrams/SYSTEM_ARCHITECTURE.md`
- Архитектура системы
- Слои приложения
- Потоки данных
- Технологический стек

### 4. DevOps диаграмма
**Файл:** `diagrams/DEVOPS_DIAGRAM.md`
- Docker контейнеры и их взаимодействие
- Процесс развертывания
- Volumes и хранение данных
- Команды для управления

## API Endpoints

### Аутентификация
- `POST /api/v2/auth/login/` - вход
- `POST /api/v2/auth/register/` - регистрация
- `GET /api/v2/me/` - информация о текущем пользователе

### Каталог
- `GET /api/v2/offers/` - список предложений

### Заказы
- `GET /api/v2/orders/` - список заказов пользователя
- `POST /api/v2/orders/` - создание заказа

### Админ панель
- `GET /api/v2/admin/stats/` - статистика
- `GET /api/v2/admin/orders/` - все заказы
- `GET /api/v2/admin/users/` - список пользователей
- `GET /api/v2/admin/services/` - список услуг

### Менеджер панель
- `GET /manager/api/profile/` - профиль менеджера
- `GET /manager/api/services/` - услуги менеджера
- `GET /manager/api/bloggers/` - блоггеры
- `GET /manager/api/orders/personal_orders/` - персональные заказы
- `POST /manager/api/orders/{id}/accept/` - принять заказ
- `POST /manager/api/orders/{id}/reject/` - отклонить заказ
- `POST /manager/api/orders/{id}/complete/` - завершить заказ
- `GET /manager/api/reports/` - отчёты
- `POST /manager/api/reports/generate/` - создать отчёт

## База данных

### Основные таблицы

1. **auth_user** - пользователи
2. **accounts_profile** - профили пользователей
3. **managers_manager** - менеджеры
4. **bloggers_blogger** - блоггеры
5. **bloggers_adoffer** - рекламные предложения
6. **managers_adservice** - рекламные услуги
7. **ads_order** - заказы пользователей
8. **managers_managerorder** - заказы менеджеров
9. **reviews_review** - отзывы
10. **managers_weeklyreport** - еженедельные отчёты
11. **managers_notification** - уведомления

## Безопасность

### Аутентификация
- JWT токены для API
- Сессионная аутентификация для веб-интерфейса

### Авторизация
- Проверка прав доступа на уровне API
- Middleware для защиты эндпоинтов
- Ролевая модель доступа

### CSRF защита
- Django CSRF middleware
- Токены для форм

## Развёртывание

### Docker
```bash
docker compose up -d --build
```

### Локально
```bash
pip install -r requirements.txt
python manage.py migrate
python manage.py seed_data
python manage.py runserver
```

## Тестирование

### Тестовые данные
Команда `seed_data` создаёт:
- Администратора: admin@gmail.com / admin12345
- Менеджера: manager@gmail.com / manager12345
- Пользователя: user@gmail.com / user12345
- Несколько блоггеров
- Рекламные предложения

### Ручное тестирование
1. Открыть `http://localhost:8000/`
2. Войти как пользователь
3. Заказать рекламу
4. Войти как менеджер
5. Принять/отклонить заказ
6. Сгенерировать отчёт

## Документация

- **QUICK_START.md** - быстрый старт
- **DOCKER_README.md** - работа с Docker
- **Системные диаграммы** - в папке `diagrams/`

